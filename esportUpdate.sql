/* ---------------------------------------------------- */
/*  Generated by Enterprise Architect Version 13.5 		*/
/*  Created On : 18-Dec-2019 6:02:02 PM 				*/
/*  DBMS       : MySql 						*/
/* ---------------------------------------------------- */

SET FOREIGN_KEY_CHECKS=0 
;



/* Create Tables */

CREATE TABLE `BTC`
(
	`id` INT NOT NULL AUTO_INCREMENT,
	`username` VARCHAR(50) NULL,
	`password` VARCHAR(50) NULL,
	CONSTRAINT `PK_BTC` PRIMARY KEY (`id` ASC)
)

;

CREATE TABLE `GiaiDau`
(
	`id` INT NOT NULL AUTO_INCREMENT,
	`name` VARCHAR(50) NULL,
	`btcID` INT NULL,
	`type` VARCHAR(50) NULL,
	`detail` VARCHAR(50) NULL,
	`amount` INT NULL,
	`start_date` DATETIME NULL,
    `active` Boolean NULL,
	`condition` VARCHAR(50) NULL,
	CONSTRAINT `PK_GiaiDau` PRIMARY KEY (`id` ASC)
)

;

CREATE TABLE `THAMGIAGIAIDAU`
(
	`giaidauID` INT NOT NULL,
	`vdvID` INT NOT NULL,
	`name` VARCHAR(50) NULL,
	`maThiDau` INT NOT NULL AUTO_INCREMENT,
	`soLanThua` INT NULL,
	`tinhTrang` BIT(1) NULL,
	CONSTRAINT `PK_THAMGIAGIAIDAU` PRIMARY KEY (`maThiDau` ASC)
)

;


CREATE TABLE `TRANDAU`
(
	`id_A` INT NOT NULL,
	`id_B` INT NOT NULL,
	`round` VARCHAR(50) NULL,
	`branchFight` VARCHAR(50) NULL,
	`result` VARCHAR(50) NULL,
	`detail` VARCHAR(50) NULL,
	`highlight` VARCHAR(50) NULL,
	`start_date` DATETIME NULL,
	`ngThang` INT NULL,
	`ngThua` INT NULL,
	`tranDauID` INT NOT NULL AUTO_INCREMENT,
	CONSTRAINT `PK_TRANDAU` PRIMARY KEY (`tranDauID` ASC)
)

;

CREATE TABLE `VANDONGVIEN`
(
	`id` INT NOT NULL AUTO_INCREMENT,
	`name` VARCHAR(50) NULL,
	`birthDay` DATE NULL,
	`sex` BIT(2) NULL,
	`skill` VARCHAR(50) NULL,
	`tenToChuc` VARCHAR(50) NULL,
	CONSTRAINT `PK_VANDONGVIEN` PRIMARY KEY (`ID` ASC)
)

;

/* Create Primary Keys, Indexes, Uniques, Checks */

ALTER TABLE `BTC` 
 ADD CONSTRAINT `unique_username` UNIQUE (`username` ASC)
;

ALTER TABLE `GiaiDau` 
 ADD INDEX `IXFK_GiaiDau_BTC` (`btcID` ASC)
;

ALTER TABLE `THAMGIAGIAIDAU` 
 ADD CONSTRAINT `PK_THAMGIAGIAIDAU` UNIQUE (`giaidauID` ASC, `vdvID` ASC)
;


ALTER TABLE `THAMGIAGIAIDAU` 
 ADD INDEX `IXFK_THAMGIAGIAIDAU_GiaiDau` (`giaidauID` ASC)
;


ALTER TABLE `THAMGIAGIAIDAU` 
 ADD INDEX `IXFK_THAMGIAGIAIDAU_VANDONGVIEN` (`vdvID` ASC)
;

ALTER TABLE `TRANDAU` 
 ADD INDEX `IXFK_TRANDAU_THAMGIAGIAIDAU` (`id_A` ASC)
;

ALTER TABLE `TRANDAU` 
 ADD INDEX `IXFK_TRANDAU_THAMGIAGIAIDAU_02` (`id_B` ASC)
;


/* Create Foreign Key Constraints */

ALTER TABLE `GiaiDau` 
 ADD CONSTRAINT `FK_GiaiDau_BTC`
	FOREIGN KEY (`btcID`) REFERENCES `BTC` (`id`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `THAMGIAGIAIDAU` 
 ADD CONSTRAINT `FK_THAMGIAGIAIDAU_GiaiDau`
	FOREIGN KEY (`giaidauID`) REFERENCES `GiaiDau` (`id`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `THAMGIAGIAIDAU` 
 ADD CONSTRAINT `FK_THAMGIAGIAIDAU_VANDONGVIEN`
	FOREIGN KEY (`vdvID`) REFERENCES `VANDONGVIEN` (`ID`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `TRANDAU` 
 ADD CONSTRAINT `FK_TRANDAU_THAMGIAGIAIDAU_02`
	FOREIGN KEY (`ID_B`) REFERENCES  `THAMGIAGIAIDAU`(maThiDau) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `TRANDAU` 
 ADD CONSTRAINT `FK_TRANDAU_THAMGIAGIAIDAU_32`
	FOREIGN KEY (`ID_A`) REFERENCES  `THAMGIAGIAIDAU`(maThiDau) ON DELETE Restrict ON UPDATE Restrict
;


INSERT INTO `BTC` (username,password) VALUES ('admin',"admin");

SET FOREIGN_KEY_CHECKS=1 
;
